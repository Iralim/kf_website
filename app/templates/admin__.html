<section class="py-5">
  <div class="container">
    <form method="POST" action="{{ url_for('main.add_project') }}" enctype="multipart/form-data">
  {{ form.hidden_tag() }}

  <div class="row g-4 align-items-start">

    <!-- Левая часть -->
    <div class="col-lg-8">

      <!-- Название -->
      <div class="mb-4">
        <label class="form-label fw-bold">Название проекта</label>
        {{ form.title(class="form-control form-control-lg") }}
        <div id="title-check-msg" class="small mt-2"></div>
      </div>

      <!-- Описание -->
      <div class="mb-4">
        <label class="form-label fw-bold">Описание</label>
        {{ form.description(class="form-control", rows="4") }}
      </div>

      <!-- Загрузка изображений -->
      <div class="mb-4">
        <label class="form-label fw-bold">Загрузка изображений</label>

        <!-- Зона загрузки -->
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon"><i class="bi bi-cloud-arrow-up"></i></div>
          <p class="mb-2">Перетащите изображения сюда или нажмите для выбора</p>

          <div class="file-input-wrapper">
            {{ form.img_files(multiple=True, id="imgUpload") }}
            <button type="button" class="btn btn-outline-success mt-2" id="uploadTrigger">Выбрать файлы</button>
          </div>
        </div>

        <!-- Список файлов -->
        <div class="selected-files" id="selectedFiles">
          <h6 class="fw-bold mb-3">Выбранные файлы:</h6>
          <div class="file-list" id="fileList"></div>
          <button type="button" class="btn btn-outline-danger btn-sm mt-3" id="clearFiles">Очистить список</button>
        </div>

        <!-- Галерея миниатюр -->
        <div class="gallery-grid" id="gallery"></div>

      </div>
    </div>
  </div>



        <!-- Характеристики -->
        <div class="col-lg-4">
          <div class="card border-0 shadow-sm p-4">

            <h5 class="fw-bold mb-3">Характеристики</h5>

            <div class="mb-3">
              <label class="form-label">Площадь (м²)</label>
              {{ form.square(class="form-control") }}
            </div>
            <div class="mb-3">
              <label class="form-label">Габариты (длина × ширина)</label>
              {{ form.size(class="form-control") }}
            </div>
            <div class="mb-3">
              <label class="form-label">Базовая цена</label>
              {{ form.price_base(class="form-control") }}
            </div>
            <div class="mb-3">
              <label class="form-label">Цена с коммуникациями</label>
              {{ form.price_with_communications(class="form-control") }}
            </div>
            <div class="mb-3">
              <label class="form-label">Цена готового дома</label>
              {{ form.price_ready(class="form-control") }}
            </div>
            <div class="mb-3">
              <label class="form-label">Ипотека (в месяц)</label>
              {{ form.mortgage_price_per_month(class="form-control") }}
            </div>

          </div>
        </div>
      </div>

      <!-- Отправка -->
      <div class="row mt-4">
        <div class="col-6">
          <div class="d-grid">
            {{ form.submit(class="btn btn-success btn-lg") }}
          </div>
        </div>
      </div>

    </form>

  </div>
</section>