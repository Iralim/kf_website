{% extends 'base.html' %}

{% block title %} Проект {{ project.title }}
{% endblock %}

{% block page_style %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/project_details/main_project_details.css') }}">
{% endblock %}
    <!-- NAVBAR -->
    {% block navbar %} 
        <nav class="navbar navbar-expand-lg fixed-top">
            <div class="container">
                <a class="navbar-brand" href="{{ url_for('main.index') }}">КРЕПКИЙ <span>ФУНДАМЕНТ</span></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <i class="bi bi-list"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="#home">Главная</a></li>
                        <li class="nav-item"><a class="nav-link" href="#specs">Комплектация</a></li>
                        <li class="nav-item"><a class="nav-link" href="#stats">О нас</a></li>
                        <li class="nav-item"><a class="nav-link" href="#projects">Все проекты</a></li>
                        <li class="nav-item"><a class="nav-link" href="#contact">Контакты</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    {% endblock %}

{% block sections %}
<!-- PROJECT HERO -->
        <section class="project-hero" id="home">
            <!-- INLINE STYLE BG PICTURE -->
            <style> 
                .project-hero {
                    background: linear-gradient(125deg, rgba(15, 23, 42, 0.85) 0%, rgba(15, 23, 42, 0.7) 100%), 
                                url("{{ url_for('static', filename=project.images.first().url) }}");
                    background-size: cover;
                    background-position: center;
                    padding: 140px 0 80px;
                    color: white;
                    position: relative;
                    overflow: hidden;
            }
            </style>
            
            <div class="container position-relative" style="z-index: 2;">
                <div class="row align-items-center">
                    <!-- LEFT CONTENT -->
                    <div class="col-lg-7" data-aos="fade-right">
                        <!-- Title -->
                        <h1 class="hero-project-title">{{ project.title }}</h1>
                        <!-- Description -->
                        {% if project.description %}
                        <p class="lead opacity-90 mb-4">{{ project.description }}</p>
                        {% endif %}
                        <!-- SPECS HERO -->
                        <div class="specs-grid">
                            <div class="spec-item" data-aos="fade-up" data-aos-delay="100">
                                <div class="spec-icon">
                                    <i class="bi bi-aspect-ratio"></i>
                                </div>
                                <div class="spec-value">{{ project.square }} м²</div>
                                <div class="spec-label">Площадь</div>
                            </div>
                            <div class="spec-item" data-aos="fade-up" data-aos-delay="200">
                                <div class="spec-icon">
                                    <i class="bi bi-arrows-fullscreen"></i>
                                </div>
                                <div class="spec-value">{{ project.size }}</div>
                                <div class="spec-label">Размер дома</div>
                            </div>
                        </div>
                        <!-- ADVANTAGES HERO -->
                        <div class="advantages-grid" data-aos="fade-up" data-aos-delay="500">
                            <div class="advantage-item">
                                <div class="advantage-icon">
                                    <i class="bi bi-house-check-fill"></i>
                                </div>
                                <span>Тёплый контур</span>
                            </div>
                            <div class="advantage-item">
                                <div class="advantage-icon">
                                    <i class="bi bi-tools"></i>
                                </div>
                                <span>Коммуникации под ключ</span>
                            </div>
                            <div class="advantage-item">
                                <div class="advantage-icon">
                                    <i class="bi bi-key"></i>
                                </div>
                                <span>Готов к заселению</span>
                            </div>
                            <div class="advantage-item">
                                <div class="advantage-icon">
                                    <i class="bi bi-shield-check"></i>
                                </div>
                                <span>Гарантия 10 лет</span>
                            </div>
                        </div>
                    </div>
                    <!-- RIGHT MORTGAGE BOX -->
                    <div class="col-lg-5" data-aos="fade-left" data-aos-delay="300">
                        <div class="mortgage-card">
                            <div class="text-center mb-4">
                                <h3 class="mb-3">Ипотека от 0,1%</h3>
                                <div class="mortgage-label">Ежемесячный платёж</div>
                                <div class="mortgage-amount">
                                    {{ "{:,}".format(project.mortgage_price_per_month).replace(',', ' ') }} ₽
                                </div>
                                <div class="mortgage-label">Первоначальный взнос от 15%</div>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary-custom">
                                <i class="bi bi-house-check me-2"></i>Забронировать дом
                                </button>
                                <button class="btn btn-outline-custom border-white text-white">
                                <i class="bi bi-calculator me-2"></i>Рассчитать ипотеку
                                </button>
                            </div>
                            <div class="mortgage-note text-center">
                                *Расчёт является предварительным. Точные условия уточняйте у менеджера.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- GALLERY -->
        <section class="py-5 bg-light">
            <div class="container">
                <h2 class="section-title" data-aos="fade-up">Галерея проекта</h2>
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="gallery-main" data-aos="fade-up">
                            <img id="mainImage" src="{{ url_for('static', filename=project.images.first().url) }}" alt="{{ project.title }}">
                        </div>
                        <div class="gallery-thumbnails">
                            {% for image in project.images %}
                            <div class="gallery-thumb {% if loop.first %}active{% endif %}" 
                                onclick="changeImage('{{ url_for('static', filename=image.url) }}', this)">
                                <img src="{{ url_for('static', filename=image.url) }}" alt="{{ project.title }} - фото {{ loop.index }}">
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- SPECS 4 CARDS -->
        <section id = "specs" class="bg-light specs-section">
            <div class="container">
                <h2 class="section-title text-center" data-aos="fade-up">Комплектация дома</h2>
                <div class="row g-4">
                    <!-- 1. Фундамент и перекрытия -->
                    <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="100">
                        <div class="specs-card">
                            <div class="specs-icon text-warning"><i class="bi bi-hammer"></i></div>
                            <h3>Фундамент и перекрытия</h3>
                            <p class="text-muted">Надёжная основа вашего дома — безопасность на годы.</p>
                            <ul class="specs-list">
                                <li><i class="bi bi-check-circle-fill"></i> Свайно-ленточный «Тимерлайн»</li>
                                <li><i class="bi bi-check-circle-fill"></i> Свая: диаметр 350 мм, длина 2000 мм</li>
                                <li><i class="bi bi-check-circle-fill"></i> Бетон М200</li>
                                <li><i class="bi bi-check-circle-fill"></i> Ростверк — брус 400×600 мм</li>
                                <li><i class="bi bi-check-circle-fill"></i> Плита (монолитное перекрытие)</li>
                                <li><i class="bi bi-check-circle-fill"></i> Гидроотсечка</li>
                                <li><i class="bi bi-check-circle-fill"></i> Монолитная плита 14 см, армирование стеклоарматурой</li>
                                <li><i class="bi bi-check-circle-fill"></i> Межэтажное перекрытие, при необходимости лаги с утеплителем</li>
                            </ul>
                        </div>
                    </div>
                    <!-- 2. Стены, фасад и кровля -->
                    <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="200">
                        <div class="specs-card">
                            <div class="specs-icon text-success"><i class="bi bi-building"></i></div>
                            <h3>Стены, фасад и кровля</h3>
                            <p class="text-muted">Эстетика, теплоизоляция и защита от непогоды.</p>
                            <ul class="specs-list">
                                <li><i class="bi bi-check-circle-fill"></i> Фасадные панели ППС-6 (толщина на выбор)</li>
                                <li><i class="bi bi-check-circle-fill"></i> Цокольные панели Пенофлекс 5 см</li>
                                <li><i class="bi bi-check-circle-fill"></i> Металлические доборные элементы</li>
                                <li><i class="bi bi-check-circle-fill"></i> Вентиляционные решётки</li>
                                <li><i class="bi bi-check-circle-fill"></i> Стропильная система</li>
                                <li><i class="bi bi-check-circle-fill"></i> Мембрана для защиты от ветра и влаги</li>
                                <li><i class="bi bi-check-circle-fill"></i> Кровля: профнастил / металлочерепица / клик-фальц</li>
                            </ul>
                        </div>
                    </div>
                    <!-- 3. Окна, двери и отделка -->
                    <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="300">
                        <div class="specs-card">
                            <div class="specs-icon text-info"><i class="bi bi-brush"></i></div>
                            <h3>Окна, двери и отделка</h3>
                            <p class="text-muted">Комфорт и уют в каждом помещении.</p>
                            <ul class="specs-list">
                                <li><i class="bi bi-check-circle-fill"></i> Несущие перегородки — 20 см</li>
                                <li><i class="bi bi-check-circle-fill"></i> Ненесущие перегородки</li>
                                <li><i class="bi bi-check-circle-fill"></i> Двухкамерный стеклопакет, профиль 58-й белый, фурнитура</li>
                                <li><i class="bi bi-check-circle-fill"></i> Входная дверь с терморазрывом</li>
                                <li><i class="bi bi-check-circle-fill"></i> Ровные стены «под обои»</li>
                                <li><i class="bi bi-check-circle-fill"></i> Натяжные потолки</li>
                                <li><i class="bi bi-check-circle-fill"></i> Тёплые полы</li>
                            </ul>
                        </div>
                    </div>
                    <!-- 4. Инженерные системы -->
                    <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="400">
                        <div class="specs-card">
                            <div class="specs-icon text-danger"><i class="bi bi-tools"></i></div>
                            <h3>Инженерные системы</h3>
                            <p class="text-muted">Полностью готовые коммуникации и современный комфорт.</p>
                            <ul class="specs-list">
                                <li><i class="bi bi-check-circle-fill"></i> Водоснабжение, горячая и холодная вода</li>
                                <li><i class="bi bi-check-circle-fill"></i> Бурение скважины и устройство колодца</li>
                                <li><i class="bi bi-check-circle-fill"></i> Заведение воды в дом, закладка коммуникаций на глубине промерзания</li>
                                <li><i class="bi bi-check-circle-fill"></i> Глубинный насос, гидроаккумулятор с фильтром, водонагреватель 100 л</li>
                                <li><i class="bi bi-check-circle-fill"></i> Канализация: выгребная яма</li>
                                <li><i class="bi bi-check-circle-fill"></i> Электрика: готовая, щиток, кабель ВВГ-Пнг ГОСТ, гофротруба</li>
                                <li><i class="bi bi-check-circle-fill"></i> Отопление и вентиляция, зоны с тёплыми полами</li>
                                <li><i class="bi bi-check-circle-fill"></i> Сантехника</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="price-section">
            <div class="container">
            <h2 class="section-title" data-aos="fade-up">Стоимость строительства</h2>
            <div class="price-cards">
                <!-- PRICES -->
                <div class="price-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="price-stage">Базовая комплектация</div>
                    <div class="price-amount">{{ "{:,}".format(project.price_base).replace(',', ' ') }} ₽</div>
                    <div class="price-description">
                        Тёплый контур дома: фундамент, стены, перекрытия, кровля, окна.
                    </div>
                    <ul class="price-features">
                        <li><i class="bi bi-check feature-check"></i>Фундамент</li>
                        <li><i class="bi bi-check feature-check"></i>Стены и перекрытия</li>
                        <li><i class="bi bi-check feature-check"></i>Кровля</li>
                        <li><i class="bi bi-check feature-check"></i>Окна и двери</li>
                        <li><i class="bi bi-x feature-dash"></i>Коммуникации</li>
                        <li><i class="bi bi-x feature-dash"></i>Чистовая отделка</li>
                    </ul>
                </div>
                <div class="price-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="price-stage">С коммуникациями</div>
                    <div class="price-amount">{{ "{:,}".format(project.price_with_communications).replace(',', ' ') }} ₽</div>
                    <div class="price-description">
                        Полный комплекс инженерных систем: электрика, отопление, водоснабжение.
                    </div>
                    <ul class="price-features">
                        <li><i class="bi bi-check feature-check"></i>Всё из базового</li>
                        <li><i class="bi bi-check feature-check"></i>Электрика и щиток</li>
                        <li><i class="bi bi-check feature-check"></i>Водоснабжение</li>
                        <li><i class="bi bi-check feature-check"></i>Отопление и вентиляция</li>
                        <li><i class="bi bi-check feature-check"></i>Канализация</li>
                        <li><i class="bi bi-x feature-dash"></i>Чистовая отделка</li>
                    </ul>
                </div>
                <div class="price-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="popular-badge">Популярный</div>
                    <div class="price-stage">Под ключ</div>
                    <div class="price-amount">{{ "{:,}".format(project.price_ready).replace(',', ' ') }} ₽</div>
                    <div class="price-description">
                        Полностью готовый дом с отделкой — можно сразу заезжать.
                    </div>
                    <ul class="price-features">
                        <li><i class="bi bi-check feature-check"></i>Всё из предыдущих этапов</li>
                        <li><i class="bi bi-check feature-check"></i>Чистовая отделка</li>
                        <li><i class="bi bi-check feature-check"></i>Натяжные потолки</li>
                        <li><i class="bi bi-check feature-check"></i>Тёплые полы</li>
                        <li><i class="bi bi-check feature-check"></i>Сантехника</li>
                        <li><i class="bi bi-check feature-check"></i>Электрика с розетками</li>
                    </ul>
                </div>
            </div>
        </section>
        <!-- CTA SECTION -->
        <section class="py-5 bg-light">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center" data-aos="fade-up">
                        <h2 class="section-title">Готовы стать владельцем этого дома?</h2>
                        <p class="fs-5 mb-4">Всего 3 месяца — и вы получаете ключи от готового дома с полной отделкой</p>
                        <div class="d-flex flex-wrap gap-3 justify-content-center">
                            <button class="btn btn-primary-custom btn-lg">Забронировать дом</button>
                            <button class="btn btn-outline-custom btn-lg">Рассчитать ипотеку</button>
                            <a href="{{ url_for('main.index') }}#contact" class="btn btn-outline-custom btn-lg">Получить консультацию</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- PROJECTS -->
        <section id="projects" class="projects-section">
            <div class="container">
                <h2 class="section-title" data-aos="fade-up">Все проекты</h2>
                {% include 'projects_row.html' %}
            </div>
        </section>
        
{% endblock %}

{% block page_script %}
<script>
    // Gallery functionality
function changeImage(src, element) {
    document.getElementById('mainImage').src = src;
    
    // Remove active class from all thumbnails
    document.querySelectorAll('.gallery-thumb').forEach(thumb => {
        thumb.classList.remove('active');
    });
    
    // Add active class to clicked thumbnail
    element.classList.add('active');
}
</script>
{% endblock %}