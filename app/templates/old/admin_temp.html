{% extends 'base.html' %}
{% block title %}Admin{% endblock %}

{% block styles %} 
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/style_cards.css') }}">
{% endblock %}

  {% block header %}
  <!-- üîπ –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–µ—Ä—Ö -->
  <div class="fixed-top">
    
    <!-- üîπ –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div class="topbar py-1 bg-secondary">
      <div class="container d-flex flex-wrap align-items-center justify-content-between justify-content-md-end">
        <div class="order-0 order-md-0 me-md-3">
          üìû <a href="tel:+79173755545" class="text-white text-decoration-none">+7 (917) 37-555-45</a>
        </div>
        <div class="d-flex gap-2 order-1">
          <a href="https://t.me/username" target="_blank" class="social-btn text-white" aria-label="Telegram">
            <i class="fab fa-telegram"></i>
          </a>
          <a href="https://vk.com/username" target="_blank" class="social-btn text-white" aria-label="VK">
            <i class="fab fa-vk"></i>
          </a>
        </div>
      </div>
    </div>

    <!-- üîπ –ú–µ–Ω—é -->
    <nav class="navbar navbar-expand-md navbar-light bg-white border-bottom py-3" id="mainNav">
      <div class="container align-items-center justify-content-between">
        <a class="navbar-brand fw-bold me-2" href="{{ url_for('main.index') }}">
          <img src="{{ url_for('static', filename='images/logo_krepkii_fundament.png')}}" alt="Logo" width="340">
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#mainNavbar"
          aria-controls="mainNavbar"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="mainNavbar">
          <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link active" href="#projects">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a></li>
            <!-- <li class="nav-item"><a class="nav-link" href="#"></a></li> -->
          </ul>
          <div class="d-md-none text-center mt-3">
            <a href="tel:+79173755545" class="btn btn-outline-primary">
              üìû +7 (917) 37 555 45
            </a>
            <p class="text-secondary mb-0">–ü–Ω‚Äì–ü—Ç: —Å 9:00 –¥–æ 18:00</p>
          </div>
        </div>
      </div>
    </nav>
  </div>
  {% endblock %}

{% block hero %}{% endblock %}
{% block features %}{% endblock %}


{% block content %}
<section class="py-5">
  <div class="container">
    <form method="POST" action="{{ url_for('main.add_project') }}" enctype="multipart/form-data">
      {{ form.hidden_tag() }}

      <div class="row g-4 align-items-start">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç + –ø–æ–ª—è –≤–≤–æ–¥–∞ -->
        <div class="col-lg-8">
          <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–º–∞ -->
          <div class="mb-4">
            <label class="form-label fw-bold" style="font-family: 'Oswald', sans-serif;">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
            {{ form.title(class="form-control form-control-lg") }}
          </div>

          <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
          <div class="mb-4">
            <label class="form-label fw-bold" style="font-family: 'Oswald', sans-serif;">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            {{ form.description(class="form-control", rows="4") }}
          </div>
          <!-- Upload Image -->
           <div class="mb-4">
            <label class="form-label fw-bold" style="font-family: 'Oswald', sans-serif;">–ó–∞–≥—Ä—É–∑–∫–∞ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</label>
            {{ form.img_files(class="form-control", rows="4", multiple=True) }}
          </div>
        </div>

        <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
        <div class="col-lg-4">
          <div class="card border-0 shadow-sm p-4">
            <h5 class="fw-bold mb-3" style="font-family: 'Oswald', sans-serif;">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h5>

            <div class="mb-3">
              <label class="form-label">–ü–ª–æ—â–∞–¥—å (–º¬≤)</label>
              {{ form.square(class="form-control") }}
            </div>

            <div class="mb-3">
              <label class="form-label">–ü–ª–æ—â–∞–¥—å —É—á–∞—Å—Ç–∫–∞ (–º¬≤)</label>
              {{ form.size(class="form-control") }}
            </div>

            <div class="mb-3">
              <label class="form-label">–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ (—Ç—ë–ø–ª—ã–π –∫–æ–Ω—Ç—É—Ä)</label>
              {{ form.price_base(class="form-control") }}
            </div>

            <div class="mb-3">
              <label class="form-label">–¶–µ–Ω–∞ —Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏</label>
              {{ form.price_with_communications(class="form-control") }}
            </div>

            <div class="mb-3">
              <label class="form-label">–¶–µ–Ω–∞ –≥–æ—Ç–æ–≤–æ–≥–æ –¥–æ–º–∞</label>
              {{ form.price_ready(class="form-control") }}
            </div>

            <div class="mb-3">
              <label class="form-label">–ò–ø–æ—Ç–µ–∫–∞ (–≤ –º–µ—Å—è—Ü)</label>
              {{ form.mortgage_price_per_month(class="form-control") }}
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
      <div class="row mt-4">
        <div class="col-6">
          <div class="d-grid">
            {{ form.submit(class="btn btn-success btn-lg") }}
          </div>
        </div>
      </div>
    </form>
  </div>
</section>

<section id="projects" class="py-5 bg-light">
  <div class="container text-center">

    <div class="row g-4">

      {% for project in projects %}
      <div class="col-md-6 col-lg-4">
        <a href="#" class="text-decoration-none text-reset">
          <div class="card project-card border-0 shadow-sm h-100 overflow-hidden">

            <!-- –°–ª–∞–π–¥–µ—Ä —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID -->
            <!-- <div id="carouselHouse{{ house.id }}" class="carousel slide project-image-wrapper" data-bs-ride="carousel" data-bs-interval="7000"> -->
            <div id="carouselHouse{{ house.id }}" class="carousel slide project-image-wrapper">
              <div class="carousel-inner">
                {% for image in house.images.all() %}
                <div class="carousel-item active">
                  <img src="{{ url_for('static', filename=image.image_url) }}" class="card-img-top" alt="–ü—Ä–æ–µ–∫—Ç –¥–æ–º–∞ {{ house.title }}">
                </div>
                {% endfor %}
              </div>

              <!-- –°—Ç—Ä–µ–ª–∫–∏ -->
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselHouse{{ house.id }}" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselHouse{{ house.id }}" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
              </button>
            </div>

            <div class="card-body text-start p-4">
              <h5 class="card-title fw-semibold mb-3" style="font-family: 'Oswald', sans-serif; color: #2d2d2d;">
                {{ house.title }}
              </h5>

              <table class="table table-borderless text-secondary small mb-0 compact-table">
                <tbody>
                  <tr>
                    <th scope="row">–¢—ë–ø–ª—ã–π –∫–æ–Ω—Ç—É—Ä:</th>
                    <td class="text-end text-dark fw-normal">{{ house.price_base | money }} &#8381;</td>
                  </tr>
                  <tr>
                    <th scope="row">–° –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏:</th>
                    <td class="text-end text-dark fw-normal">{{ house.price_with_communications | money }} &#8381;</td>
                  </tr>
                  <tr>
                    <th scope="row">–ó–∞–µ–∑–∂–∞–π –∏ –∂–∏–≤–∏:</th>
                    <td class="text-end text-dark fw-normal">{{ house.price_ready | money }} &#8381;</td>
                  </tr>
                  <tr class="border-top">
                    <th scope="row" class="pt-2">–ò–ø–æ—Ç–µ–∫–∞ –æ—Ç:</th>
                    <td class="text-end fw-semibold pt-2">{{ house.mortgage_price_per_month | money }} &#8381;/–º–µ—Å</td>
                  </tr>
                </tbody>
              </table>
            </div>

          </div>
        </a>
      </div>
      {% endfor %}

    </div>
  </div>
</section>
{% endblock %}
